\chapter{Introduction}
At the age of fourteen, I\footnote{Note, Chapters 1, 2, and 6 make use of the pronoun ``I'' whereas Chapters 3, 4, and 5 make use of the pronoun ``we.'' This discrepancy mirrors the fact that Chapters 3-5 are based on work that was performed with collaborators, whereas Chapters 1, 2, and 6 represent writings that were produced without the vetting or consensus of collaborators. I thought it best not to wrongly associate any ideas that my collaborators might disagree with, so I have chosen not to use ``we'' when I am not literally referring to joint statements or work.} began commuting to school by bicycle. Unfortunately, at age sixteen, I was in a collision with a motor vehicle: I was ``doored.'' In laymen's terms, while commuting with my best friend, a driver suddenly opened their car door into the lane we were traveling in, striking both of us and causing us to fly off our bicycles into the roadway. After crashing to the ground, my friend was able to pull me out of the roadway just before I was crushed by an oncoming van, thus saving my life. Unfortunately, my bicycle was not so lucky, and it laid mangled beneath the van. In the wake of the destruction of my bicycle and of my naive belief in the safety of modern streets, I left the scene of the crash with a bevy of questions. Foremost among these was the question: \textbf{``what makes people travel by bicycle?''} My thought, then and now, was that if we can figure out what makes people travel by bicycle, then we can design our cities and regions to maximally divert individuals from private automobiles to bicycles. Since private automobiles are the largest threat to cyclists, such a diversion would increase bicycle safety and reduce the chance of anyone suffering a similar or worse fate than I.

After the crash, I repeatedly searched the internet for what makes people cycle, and as a result, bicycling provided my first introduction to the fields of transportation planning and engineering. Eleven years later, this dissertation's introduction necessarily begins with the same motivating question. While the methods presented in the interior chapters of this dissertation are widely useful beyond the original setting of travel mode choice, to start with the methods would be putting the proverbial cart-before-the-horse. In other words, to understand why I made the methodological advances that I made, one must understand the problems that these methods were meant to solve.

Accordingly, this chapter discusses the substantive societal problem and historical practices that motivate this dissertation's methodological contributions. Focusing on the prediction of bicycle mode shares in the United States, I describe how my work is motivated by four particular issues with previous travel demand models. First, I detail issues with the input data to travel mode choice models that are used to predict bicycle mode shares. Then, I move on to highlight two overlooked, empirical observations of individuals making commute mode choices, paying special attention to the ways that traditional travel demand models might be enhanced by accounting for these observations. Finally, I comment on the technical requirements that are required for strategic bicycle planning efforts, focusing on the inferential gulf between these requirements and the intrinsic properties of traditional travel demand models.

\section{Motivation}
\label{sec:intro-motivation}
Across all levels of government in the United States (U.S.), transportation and planning agencies have prioritized encouraging bicycle use. For instance, as stated by the Federal Highway Administration, ``it is federal transportation policy to promote the increased use and safety of bicycling and walking as transportation modes'' \citep{federal_highway_administration_bicycle_2003}. Locally, the California State Department of Transportation (Caltrans) shares the Federal governmentâ€™s cycling goals. As stated in Caltrans' 2002 California Blueprint for Bicycling and Walking, California had statewide goals of a 50\% increase in the 0.8\% bicycle commute mode share from the year 2000 to a 1.2\% bicycle mode share by the year 2010 \citep{california_department_of_transportation_california_2002}. However, as of 2014--the most recent year for which U.S. Census data is available--California's bicycle commute mode share was 1.1\% and the state's mode share goals for bicycling had still not been met \citep{u.s._census_bureau_b08006:_2014}. Similarly, at the municipal level, San Francisco set a goal in 2010 to achieve a 20\% bicycle mode share by 2020 \citep{sfmta_2012_2012}. However, given the 2014 citywide, bicycle commute mode share of 3.8\% \citep{u.s._census_bureau_b08006:_2014} San Francisco does not appear to be on track to meet its mode share goals either. While unfortunate, this pattern is not unique to California. There are agencies all across the U.S. and at all levels of U.S. government that are interested yet unsuccessful in meeting their bicycle commute mode share goals.

In analyzing how city and state transportation agencies might make progress towards their stated bicycle commuting goals, it is apparent that these agencies primarily affect the travel behavior and traveling conditions of their constituents through implemented infrastructure projects. To fully support their bicycling agenda, it is therefore necessary for government agencies to judge the extent to which each possible project will increase bicycle usage. However, despite this clear need, current travel demand models are often unable to assess the sensitivity of bicycle mode shares to key variables that agencies control (e.g., the layout of a city's bicycle network or the motor vehicle speeds on city roadways). Moreover, even if an agency's mode choice model is sensitive to the variables of interest, the agency's model should accurately predict the probability that an individual travels by bicycle so that the agency can be as best informed about the potential benefits of each project. In sum, U.S. transportation agencies need (1) mode choice models that are sensitive to variables of interest such as bicycle infrastructure and roadway conditions (vehicle travel speeds, roadway slopes, etc.) and (2) mode choice models that are as accurate as possible.

\section{Research Objectives}
\label{sec:research-objectives}
To address the need for accurate and policy sensitive bicycle demand models, the research objectives of this dissertation are to:

\begin{enumerate}
\item incorporate roadway-level data (such as the location of bicycle lanes and roadway speed limits) directly into existing mode choice models

%\item account for differing rates of adoption and abandonment across different commuting modes (e.g. individuals embracing driving more rapidly than cycling)
\item mitigate the negative impacts of relative class imbalance (i.e low rates of bicycling relative to other travel modes) on mode choice models
\label{class_imbal_goal}

\item account for ``alternative'' (i.e. non-compensatory) decision protocols that may lead travelers to exclude bicycles from consideration as a travel mode

\item investigate how travel demand models might be altered or enriched in order to measure causal as opposed to associational relationships.
\end{enumerate}

Overall, the four aforementioned research objectives serve three goals. First, the objectives aim to increase the practical usefulness of mode choice models by directly incorporating roadway-level variables into them. Such inclusions will allow mode choice models to answer questions about infrastructure investment decisions. Secondly, by accounting for overlooked behavioral features that characterize the bicycle commuting decision, the aforementioned research objectives aim to increase the accuracy of bicycle demand models. In particular, I reduce the negative impacts of low-cycling rates on mode choice models by allowing for differing willingnesses to adopt different travel modes, and I incorporate non-compensatory protocols into mode choice models to more realistically model both choice set construction and preference construction. Lastly, my research objectives aim to improve the usefulness of mode choice models for transportation planning by investigating how such models can be used to estimate causal as opposed to merely associational relationships. Such a change would allow practitioners to make more credible inferences about which intervention or set of interventions will lead to the greatest benefits for a given level of investment.

As noted earlier, while this dissertation's substantive motivation is the improving bicycle demand models in particular, the methods developed in the course of this research apply more broadly to the fields of choice modeling, statistics, machine learning, and causal inference. A clear example of this is the class-imbalance research mentioned above in point \ref{class_imbal_goal} and in Section \ref{sec:asym-motivation}. While useful in the context of mode choice models, choice modeling and statistics both benefit from our creation of flexible probability functions whose rates of increase and decrease from 50\% (i.e. adoption and abandonment rates) can be estimated to fit one's data as best as possible. Likewise, this dissertation's research on non-compensatory decision making benefits choice modelling in general by more flexibly relaxing the assumption of rational consideration set formation than in previous choice models. At the same time, I contribute to the field of machine learning by creating a new decision tree variant to represent these non-compensatory rules, filling a missing rung in the hierarchy of advanced decision tree methods.

\section{Omitted roadway-level variables}
\label{sec:omitted_vars}
The current state of most mode choice models is that they focus on socio-demographic attributes of the decision makers and ``level-of-service'' variables such as travel times (e.g. in-vehicle travel time, waiting time, access time, egress time), travel cost, and travel distances of various modes \citep{singleton_pedestrians_2013}. As noted above, variables that describe individual roadway segments and are of particular interest to policy makers and individual travelers, such as the presence of bicycle lanes or the speed limit on particular roadways, do not often appear in mode choice models. Such an exclusion affects transportation engineering in two major ways. First, the usefulness of current mode choice models for addressing policy questions, such as whether one proposed bicycle infrastructure plan will have a greater effect on bicycle demand than another possible plan, is greatly reduced when the relevant variables being altered do not even appear in one's model. Secondly, the ability of current models to accurately represent the choice processes of individuals may be reduced by omitted variable bias and the spatial autocorrelations that may occur due to the omission of these roadway-level variables \citep{goetzke_are_2003}. As noted in the Section \ref{sec:intro-motivation}, this omission indicates a clear need for methods of integrating roadway segment information into mode choice models.

Thus far, roadway-level variables have been incorporated into mode choice models in three main ways: through the use of buffer-based methods (as in geographic buffers around a point in space), through the use of pedestrian/bicycle environment factors, and through the use of route choice models \citep{guo_effect_2007, replogle_integrating_1995, nassir_choice_2014}. Each of these methods has their drawbacks. First, buffer-based methods require the arbitrary setting of a distance to use as the buffer radius around the origin and/or destination. Secondly, it is not necessarily clear that all of the area around a person's origin and/or destination is important to a traveler's mode choice decision, especially since an individual will be traveling in a particular direction and only the attributes of the built environment in that direction are expected to be relevant. Thirdly, if multiple spatial attributes are to be included in one's mode choice model, it is not clear whether or how those multiple variables should be combined for entry into the model. 

Arbitrariness or the ad-hoc nature of methods for combining multiple attributes that one considers important is also a criticism of pedestrian/bicycle environment factors \citep{ewing_travel_2001}. Such environment factors are often hand-crafted indices that are thought to measure the ``quality'' of the built environment for walking and bicycling \citep{replogle_integrating_1995}, but the coefficients used to combine different variables into a single number are typically chosen through ``expert-judgement'' as opposed to being chosen through a systematic method. In contrast, by using route-choice models to measure the quality of various routes and then using the logsum in a mode choice model to measure the overall quality of the  bicycling option, one avoids the pitfalls of using ad-hoc methods to quantify the quality of bicycling for an individual or of considering irrelevant geographies as with buffer based methods. 

However, there are at least three problems with the use of combined route and mode choice models. First, transportation datasets that are used for mode choice models are typically travel diaries, and such datasets do not typically collect information on the precise routes that individuals, particularly cyclists, use. Since these datasets cannot be used to construct route choice models, the coefficients from route choice models developed on one set of individuals are then used to represent the sensitivities of different individuals in the mode choice dataset. Secondly, route choice models are only estimated on those for whom we have observed route choices--i.e. current cyclists. The sensitivities of current cyclists are then taken to be the same as the sensitivities of non-cyclists, and this is probably an inaccurate assumption. Nevertheless, the logsum measure based on cyclists' sensitivities are used to represent the overall quality of bicycling for non-cyclists. Lastly, it typically takes a long time to estimate and forecast with route choice models \citep{nassir_choice_2014}. Both the initial estimation and the forecasting process of common route choice models depend on lengthy route generation processes that limit the practical usefulness of such models.

Given the issues with previous approaches seen in the literature, a new method of incorporating roadway-level variables into mode choice models is desired---a method that combines the virtues of the extant methods and avoids their problems. Ideally, this new methodology should
\begin{enumerate}
\item minimize the use of ``arbitrary'' parameters to be set by the analyst (such as the buffer distance in buffer-based methods or the weighting coefficients in bicycle environment factors)
\item avoid including ``irrelevant'' roadways when quantifying roadway conditions for bicycling
\item incorporate variables related to roadways \textit{in between} an individuals origin and destination, not just \textit{at} the origin or destination
\item avoid implying equality of sensitivities between disparate datasets without justification for such implications
\item avoid applying coefficients estimated solely based on bicyclists to samples of bicyclists and non-cyclists
\item minimize computing time so that the method can be practically useful.
\end{enumerate}

In \hl{Chapter 1} I describe the ``zone-of-likely travel'' and decision-tree approach to incorporating roadway level variables into mode choice models. As will be shown, the new method meets all of the desiderata listed above.

\section{Differential adoption and abandonment}
\label{sec:asym-motivation}
Beyond the need for new methods of incorporating roadway-level variables into mode choice models, bicycle mode choice models should be as accurate as possible. Greater accuracy of one's mode choice model enables agencies to more accurately: anticipate the future travel demands of their constituent populations, understand how the travel behavior of their populations are likely to change in response to changes in the transportation system, and quantitatively judge which projects will contribute the most towards their regions' various goals (e.g. congestion management, air quality, health, sustainability, etc.). The perspective taken in this dissertation is that one will be most successful in improving the accuracy of bicycle demand models by taking into account the specific features that characterize choice modeling in the context of bicycle mode choice. To be concrete, two salient characteristics that are pertinent to bicycle mode choice modeling are that bicycle demand modeling in the U.S. often takes place in a significantly class imbalanced setting and that individuals rarely seem to go through a fully rational, compensatory, utility-maximizing procedure when choosing whether to commute by bicycle. 

Taking the first characteristic mentioned above, class-imbalance is defined in this dissertation as a condition where at least one discrete outcome is over- or under-represented compared to the other outcomes. In particular, if one is dealing with a cross-sectional dataset with J discrete outcomes ($J \geq 2$), class imbalance is the situation where one or more of the J outcomes is present in more (or less) than $\frac{N}{J}$  records in one's dataset, where $N$ is the total number of observations in the dataset. Given that bicycle mode shares in large U.S. cities are typically very low, one might correctly surmise that class-imbalance is typical of travel mode choice datasets that include bicycling. For instance, the highest bicycle commute mode share is approximately 6\% in cities with between 300,000 and 1 million people; approximately 2\% in cities with more than 1 million people; and even lower in the suburbs surrounding cities. \citep{league_of_american_bicyclists_where_2014}. As a result, household travel surveys--the main data source for mode choice models--that follow a simple random sampling protocol will likely result in datasets where the percentage of bicycle commuters is much lower than the percentage of commuter of other modes (relative class imbalance) and where the absolute number of bicycle commuters is small (absolute class imbalance). This is evident, for example, in the travel demand model used by San Francisco County, SF-CHAMP. The survey used to estimate SF-CHAMP included 10,897 trips, of which only 100 trips were made by bicycle, leading to a bicycle mode share of approximately 0.92\% in their dataset \citep{cambridge_systematics_san_2002}.

Far from being an innocuous quality, class imbalance is often mentioned as causing serious problems for analysts. Absolute class imbalance, where one simply has a low number of observations of one or more outcomes is claimed by travel demand modelers \citep{parsons_brinckerhoff_quade_&_douglas_transportation_2005}, academic statisticians \citep{chen_using_2004}, and computer scientists \citep{weiss_mining_2004, he_learning_2009} alike as making it hard to build common models and degrading the performance of such models. In general, absolute class imbalance is thought to lead to a situation where one cannot adequately ``learn a concept'' due to a scarcity of observations from which one builds a model \citep{weiss_mining_2004, he_learning_2009}. Likewise, relative class imbalance, where one has a relatively lower amount of observations from one or more outcomes as compared to other categories, is also thought to degrade an analyst's ability to model the probability of the ``rare class(es)'' \citep{cramer_predictive_1999, king_logistic_2001, japkowicz_class_2000, wallace_class_2011}. There are a number of reasons why this degradation is thought to take place, but in the context of standard discrete choice models, the explanations offered so far depend on whether the standard logit model is thought to be the correct probability model.

If the logit model is the correct probability model, then relative class imbalance is thought to cause problems by increasing the finite sample bias in one's estimated utility function coefficients, in such a way that one's probability estimates of the ``rare'' class are downward biased more than they would be in the case of balanced class observations \citep{king_logistic_2001}. In both this case, and in the case of absolute class imbalance, collecting choice-based samples and using relevant estimation techniques such as weighted-exogenous maximum likelihood can eliminate the problems caused by class imbalance \citep{manski_estimation_1977, breslow_statistical_1987, king_logistic_2001}. However, since analysts often lack control over the data collection process, post-data-collection methods of mitigating the negative effects of class-imbalance are still useful. Additionally, there are many statisticians in fields such as marketing \citep{wang_generalized_2010}, finance \citep{calabrese_generalized_2011}, insurance \citep{bermudez_bayesian_2008, perez-sanchez_bayesian_2014}, biology \citep{jiang_new_2013}, and medicine \citep{saez-castillo_bayesian_2010} who believe that relative class imbalance may be indicative of a situation where the true probability function is asymmetric\footnote{See \hl{Chapter 3} for a detailed definition of symmetric and asymmetric probability functions.}, unlike the standard logit or probit model that are both symmetric \citep{chen_new_1999}. Such asymmetric models imply that individuals have rates of adoption and abandonment that differ by alternative. If the true probability function is choices in actually asymmetric, then using a logit or probit model (the typical transportation mode choice models) to predict the probability a particular outcome occurring will result in link-function mis-specification: a condition known to result in inconsistent coefficient estimates \citep{czado_effect_1992} and in probability estimates which can be far from the truth \citep{koenker_parametric_2009}. 

To guard against link function mis-specification, one would ideally estimate a \textit{single-index model} where one performs a non-parametric estimation of the probability function, along with a parametric estimation of the coefficients of one's utility functions \citep{hardle_semiparametric_1997, horowitz_semiparametric_2010}. While ideal, such a procedure can be computationally intensive and may require a very large number of observations to obtain an adequate estimate of the probability function. As a compromise between doing nothing or performing a complete non-parametric estimation, some statisticians \citep{czado_parametric_1994, koenker_parametric_2009} have suggested ``embedding'' the standard logit and probit models in a wider class of ``parametric link-functions'' where a vector of parameters can be estimated according to one's data to allow varying types and degrees of asymmetry in one's probability function to fit one's data best.

Motivated by the aforementioned literature, a large number of asymmetric probability functions have been introduced for binary outcomes. For example, there have been numerous, distinct one parameter generalizations of the logit model: \citep{aranda-ordaz_two_1981, guerrero_use_1982, czado_link_1992, nagler_scobit:_1994, chen_new_1999, masnadi-shirazi_variable_2010, nakayama_unified_2015, komori_asymmetric_2015}. Additionally, a number of two parameter generalizations of the binary logit model have been created: \citep{prentice_generalization_1976, pregibon_goodness_1980, stukel_generalized_1988, czado_parametric_1994, vijverberg_betit:_2000, vijverberg_pregibit:_2012}. Beyond generalizations of the logit model, many other other binary probability functions have been put forth over the years based on distributions such as the student's $t$ distribution, the cauchy distribution, the generalized extreme value distribution, the weibull distribution, the skew-normal distributions, and so on: \citep{kim_binary_2002, liu_robit_2004, castillo_closed_2008, kim_flexible_2008, koenker_parametric_2009, wang_generalized_2010, li_multinomial_2011, jiang_new_2013}. 

Despite the work mentioned above, to be useful in addressing relative class-imbalance problems in the context of bicycle mode choice modeling, the proposed parametric link-functions must be capable of handling multinomial outcomes such as ``bicycle, walk, drive alone, bus, train'' and so on. Unfortunately, besides the function's created in this dissertation, only three multinomial, parametric link-functions have been proposed and estimated so far:  the link family originally introduced by Czado for binary regression \citep{das_generalized_2014}, the weibit model \citep{castillo_closed_2008, fosgerau_discrete_2009}, and the q-generalized logit model \citep{nakayama_unified_2015}. These functions have never been applied in the context of bicycle travel, and they are either complex or too restrictive for general use. One reason for the paucity of multinomial, parametric link-functions may be the fact that no unified approach for the generation of these various probability functions has been provided in the literature so far. If the research on binary, parametric link-functions is to be built upon and be brought to bear on the problem of class imbalance in bicycle mode choice modeling, then we need (1) a systematic way of generating multinomial, parametric link-functions and (2) a demonstration of whether such functions can appreciably increase the accuracy of standard models of bicycle mode choice.

In \hl{Chapter 3}, I present methods for generating new asymmetric choice models, I show that these new models can fit one's data much better than traditional mode choice models, and I demonstrate how these asymmetric models lead to new insights that are missing from traditional methods.

\section{Non-compensatory bicycle mode choices}
\label{sec:irrational_choices}
Returning to the second characteristic of bicycle commuting mentioned above, it is not known \textit{a-priori} that individuals make completely rational choices of whether to commute by bicycle. Indeed, it is not clear that individuals perform a comprehensive, weighted comparison of all of the attributes of each of their possible commuting alternatives and then select the alternative that maximizes their individual utility. It is possible that individuals may use heuristic decision rules to shrink the set of alternatives that they subject to a utility maximizing procedure, i.e. before using utility maximization to make a final choice from their consideration sets, individuals may use other decision rules to first narrow their consideration set from their overall choice sets. Critically, individuals may (for a variety of reasons) exclude bicycling from consideration, thereby removing all possibility that they will use a bicycle to commute to work/school. If one does not account for the fact that such individuals do not even consider bicycling, then one will make incorrect inferences regarding the amount by which any project can be expected to increase the expected number of cyclists. In other words, one must be sure that an individual is considering bicycling as a commuting option before trying to judge the ability of an intervention to increase the probability that the individual actually bikes.

To allow for heterogenous consideration sets in a population, mode choice models have been operationalized based on assumptions regarding: the existence of latent market segments that each have their own consideration sets and utility coefficients \citep{vij_incorporating_2013, vij_preference_2014}, the existence of individuals that are either completely rational or who irrationally only consider a single travel mode \citep{swait_incorporating_1987} or whether alternatives are independently chosen for inclusion in one's consideration set \citep{swait_empirical_1987, swait_choice_2001, swait_choice_2009}. With these formulations, researchers have already found support for the hypothesis that, beyond deterministic differences in the travel modes which are available to a given person, individuals differ in whether they consider bicycling as a commuting option \citep{swait_choice_2009, vij_preference_2014, mahmoud_latent_2015}.

In all the modeling efforts just described, the probability of an individual considering a particular mode was always based on a compensatory model where one variable with a positive effect on a mode's probability of being considered could make up for a variable with a negative effect on a mode's probability of being considered. The compensatory nature of the aforementioned models is curious in light of the fact that when asked about why they don't commute by bicycle, individuals do not state that the issues which make them avoid bicycling to work can be compensated for by other commonly used variables in mode choice models. Individuals commonly state that they live too far away to commute by bicycle, that roadway conditions are too dangerous for them to commute by bike, that cycling would require too much physical exertion, that they have to drop-off children some place, and so on \citep{goldsmith_reasons_1992, cleland_why_2004}. It is not clear  \textit{a-priori} that these type of concerns can be incrementally compensated for by changes in sociodemographic variables or level-of-service variables for the various travel modes. As a result, it is reasonable to think that non-compensatory models of consideration set formation may be better able to emulate the actual decision making process of individuals, thereby achieving greater model accuracy, more realistic model forecasts, and/or qualitatively different model forecasts than the compensatory models which have been used in the mode choice setting thus far.

In contexts other than travel mode choice, multiple models that combine non-compensatory decision rules for consideration set construction with compensatory utility-maximization for choosing from within that consideration set have already been designed and estimated. Non-compensatory decision rules that have been used include conjunctive rules \citep{swait_non-compensatory_2001, elrod_new_2004, gilbride_choice_2004}, subset conjunctive rules \citep{jedidi_probabilistic_2005}, disjunctive rules \citep{swait_non-compensatory_2001, elrod_new_2004, gilbride_choice_2004}, ``disjunctions of conjunctions'' \citep{hauser_disjunctions_2010}, dominance \citep{cascetta_dominance_2009}, elimination by aspects \citep{gilbride_estimating_2006}, economic screening \citep{gilbride_estimating_2006}, lexicographic rules \citep{kohli_representation_2007}, and satisficing  \citep{stuttgen_satisficing_2012} to name a few. Given this existing literature, what is now needed is an application of the various models based on non-compensatory decision rules to the context of consideration set formation in bicycle mode choice models, and a comparison with the prevailing compensatory approaches to choice set formation.

Beyond the purely pragmatic concerns over which type of model will most accurately represent the bicycle mode choice process, there are at least two theoretical contributions to be made by combining non-compensatory models of consideration set formation with compensatory models of the conditional choice made by each individual.  First, a wide variety of methods have been used to estimate the various non-compensatory decision rules for different datasets. However, despite the eclectic set of estimation methods, and despite the fact that a subset of these rules--namely conjunctive rules, subset conjunctive rules, disjunctive rules, and ``disjunctions of conjunctions''--can be represented as decision trees \citep{hauser_disjunctions_2010}, tree-induction algorithms from computer science and statistics have not been used to estimate these non-compensatory decision rules.  Similar to how McFadden (\citeyear{mcfadden_conditional_1972}) used random utility maximization to bring economic meaning and theory to the long-used logistic regression model, I use non-compensatory decision rules to bring economic meaning and theory to classification trees.

Additionally, disjunctions-of-conjunctions and its various special cases can be thought of as describing distinct situations. These situations are then used to characterize whether an alternative is available to a decision maker or not. Typically, the choice is then modeled using a probability model whose coefficients do not differ according to the situation associated with the decision maker. This procedure implicitly throws away information since we know the shares of each alternative chosen by individuals in each alternative, and we could use this information to infer individual preferences in each situation. Hybrid decision-tree logit models \citep{steinberg_hybrid_1998} or similar types of ``model trees'' present one way to formalize such influence, but we still lack methods to perform joint (as opposed to sequential), probabilistically motivated estimations for models that (1) use tree-like models to model an individual's consideration set and (2) use information from the shares of each alternative in a given situation to infer individual preferences in the compensatory, utility maximizing choice model used to make the final choice given one's consideration set. The development of such methods would allow analysts to make greater use of the data that they already have in order to more accurately predict the probability that an individual considers and then chooses bicycling as a commute mode.

In \hl{Chapter 4}, I present the general framework for interpreting decision trees through the lens of microeconomic theories, and I present methods for jointly estimating bayesian model trees. These are new hybrids of decision trees and discrete choice models that allow for non-compensatory consideration set formation, analyst uncertainty over the non-compensatory rules, and context-dependent preference heterogeneity. By applying such models to disaggregate bicycle mode choice data in the San Francisco Bay area, we are able to form much better fitting models of bicycle mode choice, we generate predictions that are far more plausible than traditional mode choice models, and we gain qualitative insights into the way individuals are likely to react to bicycle infrastructure investments.


\section{Causes versus associations}
\label{sec:causal-biking}
In an ideal setting, transportation professionals would look at the budget they have available to spend on bicycle infrastructure projects, and then they would proactively solve an optimization problem to determine where new infrastructure should be installed to maximize the bicycle mode share in their jurisdiction. However, in order to have such optimization problems be meaningful, the mode choice model that is used to predict the bicycle mode shares must be measuring \textit{causal} as opposed to \textit{associational} relationships. The distinction between the two types of relationships is that causal inferences will be valid under external policy interventions (such as a transportation agency installing new bicycle lanes), whereas an associational inference will not necessarily be accurate under external intervention.

The academic discipline of causal inference is exclusively devoted to determining when and how such causal relationships can be estimated. However, travel demand modeling and causal inference research have largely remained separate from each other. Though travel demand modelers expect that their models will be accurate under external intervention, the relevant techniques from the causal inference literature are almost never used to verify and guide the creation of traditional travel demand models.

In \hl{Chapter 5}, I examine the similarities and disconnects between the fields of causal inference and travel demand modeling. Though the two fields share similar objectives, I explore the striking differences between the methods employed by each discipline. Moreover, at a more general level, I step back to review the expected benefits that will likely come from a cross-pollination of techniques between travel demand modelers and causal inference researchers. Using bicycling as a case study, I examine how travel demand modeling practices might change in order to incorporate insights from causal inference research, and I detail challenges to such a methodological merger, i.e. the kind of merger that is needed for transportation planners and engineers to make strategic investments in bicycle infrastructure.

\section{Contributions}
\label{sec:intro-contributions}
Synthesizing the information presented above, this dissertation makes contributions related to each of the four research objectives described in Section \ref{sec:research-objectives}.

First, I develop a new decision-tree based method for incorporating roadway-level variables into discrete choice models. This new method uses a novel concept called the ``zone of likely travel.'' In doing so, I build upon previous GPS-based research that characterizes the way cyclists travel. By combining the zone of likely travel with decision trees, my new method combines the strengths of buffer-based approaches and bicycle environment factors. Importantly, my new method avoids many drawbacks of these earlier methods and of route-choice based methods for incorporating roadway level variables into mode choice models.

Secondly, motivated by the fact that bicycle demand models are almost always estimated on class-imbalanced datasets, I make three methodological contributions related to the issue of class imbalance. First, I introduce a new class of closed-form, finite-parameter multinomial choice models. This new class generalizes many existing models from discrete choice and statistics. Additionally, these new models can capture differential rates of adoption and abandonment between alternatives. It is this asymmetry in adoption and abandonment rates that enables these models to better explain why class-imbalance is occurring.

Beyond the mere creation of a new class of models. I develop two procedures for creating new models within this class. These procedures fill two existing gaps in the statistical and discrete choice literature. The first procedure provides a way for researchers to create new binary choice models, either symmetric or asymmetric. In contrast to the hitherto ad-hoc (and often undocumented) methods used to create new binary choice models, this new procedure allows researchers to systematically derive new choice models with particular properties such as whether the model is symmetric or not. The second procedure provides a systematic way to extend binary choice models to the multinomial setting using my newly created class of multinomial choice models. Together with the first procedure, this advancement allows for the standardized creation of new, possibly asymmetric, multinomial choice models. Furthermore, the second procedure allows for the creation of multinomial extensions to existing statistical models, theereby making these models vastly more useful to researchers in fields such as marketing, transportation, etc.

Thirdly, I make two contributions related to the incorporation of non-compensatory decision rules into discrete choice and bicycle demand models. First, I develop a microeconomic framework for the interpretation of decision trees and their many generalizations. In doing so, I show (1) how decision trees represent a class of non-compensatory decision rules known as disjunctions-of-conjunctions and (2) how decision trees increase the flexibility of the non-compensatory behaviors that can be empirically estimated in discrete choice settings. Secondly, I make methodological contributions to both machine learning and the existing literature of two-stage, semi-compensatory choice models. By developing the first bayesian model tree, I allow for estimation uncertainty in the estimated decision tree, and I allow for the joint estimation of the trees and discrete choice models at the output nodes of the decision trees. Such a model represents a notion of context-dependent preference heterogeneity where the parameters of one's choice model can differ across output nodes, thereby making the choice model parameters a function of the variables used to construct the decision tree.

Finally, because strategic bicycle planning would be best supported by mode choice models that measure causal relationships, I make two contributions that try to bridge the gap between the fields of travel demand modeling and causal inference. First, I identify causal inference techniques that can be used by travel demand modelers to improve our ability to make causally valid inferences. Secondly, I identify areas of the causal inference literature that can benefit (either methodologically or in application) from the engagement of travel demand modelers.

Together, these contributions represent significant methodological advances in discrete choice, statistics, machine learning. Moreover, these contributions solve practical problems related to the use of discrete choice models for bicycle planning. And lastly, these contributions forge critical connections with the field of causal inference, thereby paving the way towards more useful demand models---for bicyclists and for all.

\section{Dissertation Outline}
\label{sec:dissertation-outline}
This dissertation is structured as follows. \hl{Chapter two} incorporates roadway level variables into mode choice models using decision trees and a novel concept called the zone of likely travel. \hl{Chapter three} uses asymmetric mode choice models to capture differential rates of adoption and abandonment of alternative travel modes, thereby allowing the models to better explain the observed levels of class imbalance (e.g. the relatively low levels of cycling). In \hl{Chapter four}, I use bayesian model trees to account for ``if-then'' methods of decision making that are likely to be used by individuals that are deciding whether or not to commute by bike. Next, in \hl{Chapter 5}, I reflect on the state of the union between causal inference and travel demand modeling. I review the benefits to each community that may come from a stronger link between the two fields; I examine why causal inference techniques have not been incorporated into travel demand models so far; and I take first steps at sketching how one might incorporate causal inference techniques into travel demand modeling overall and bicycle demand modeling in particular. Finally in \hl{Chapter 6}, I recap what has been accomplished, what next steps are ready to be taken now, and what issues remain to be addressed in the indeterminate future.

\bibliographystyle{plainnat}
\bibliography{../../dissertation}